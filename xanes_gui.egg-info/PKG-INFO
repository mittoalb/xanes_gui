Metadata-Version: 2.4
Name: xanes-gui
Version: 1.0.1
Summary: A PyQt5-based graphical interface for XANES spectroscopy at APS Beamline 32-ID
Author-email: Alberto Mittone <amittone@anl.gov>
Maintainer-email: Alberto Mittone <amittone@anl.gov>
License: MIT
Project-URL: Homepage, https://github.com/mittoalb/xanes-gui
Project-URL: Documentation, https://xanes-gui.readthedocs.io
Project-URL: Repository, https://github.com/mittoalb/xanes-gui
Project-URL: Bug Tracker, https://github.com/mittoalb/xanes-gui/issues
Project-URL: Changelog, https://github.com/mittoalb/xanes-gui/blob/main/CHANGELOG.md
Keywords: xanes,spectroscopy,xray,synchrotron,epics,beamline,aps,x-ray absorption
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Science/Research
Classifier: Topic :: Scientific/Engineering :: Physics
Classifier: Topic :: Scientific/Engineering :: Chemistry
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Operating System :: POSIX :: Linux
Classifier: Operating System :: MacOS
Classifier: Operating System :: Microsoft :: Windows
Classifier: Environment :: X11 Applications :: Qt
Classifier: Framework :: Qt
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: PyQt5>=5.15.0
Requires-Dist: numpy>=1.20.0
Requires-Dist: pyqtgraph>=0.12.0
Requires-Dist: pyepics>=3.5.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0; extra == "dev"
Requires-Dist: pytest-qt>=4.0; extra == "dev"
Requires-Dist: black>=22.0; extra == "dev"
Requires-Dist: flake8>=4.0; extra == "dev"
Requires-Dist: mypy>=0.950; extra == "dev"
Provides-Extra: docs
Requires-Dist: sphinx>=4.0; extra == "docs"
Requires-Dist: sphinx-rtd-theme>=1.0; extra == "docs"
Dynamic: license-file

# XANES GUI

A PyQt5-based graphical user interface for X-ray Absorption Near Edge Structure (XANES) spectroscopy measurements at APS Beamline 32-ID.

[![Python Version](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![PyQt](https://img.shields.io/badge/PyQt-5-green.svg)](https://www.riverbankcomputing.com/software/pyqt/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

## Features

- **Modern PyQt5 Interface** - Dark theme optimized for beamline environments
- **Real-time Calibration** - Live plot updates during energy scans
- **Flexible Energy Configuration** - Three methods for defining scan ranges
- **Reference Curve Support** - Calibrated and simulated spectra visualization
- **EPICS Integration** - Full Channel Access and PVAccess support
- **Thread-Safe Operations** - Non-blocking UI during acquisitions
- **Interactive Plotting** - Zoom, pan, and overlay multiple curves

## Quick Start

### Installation

```bash
pip install git+https://github.com/yourusername/xanes-gui.git
```

Or install from source:

```bash
git clone https://github.com/yourusername/xanes-gui.git
cd xanes-gui
pip install -e .
```

### Running the GUI

```bash
xanes-gui
```

Or as a Python module:

```bash
python -m xanes_gui
```

### First Time Setup

1. Configure EPICS environment variables:

```bash
export EPICS_CA_ADDR_LIST="your_ioc_address"
export EPICS_CA_AUTO_ADDR_LIST=NO
export EPICS_PVA_ADDR_LIST="your_ioc_address"
```

2. Open the **PV Settings** tab and configure:
   - Detector PVA channel
   - Energy control PVs
   - Start script path
   - Curve directories

3. Select an element and click **Calibrate** to test!

## Energy Range Methods

### Method 1: Manual Entry
Standard scans with uniform spacing:
- Enter start energy, end energy, and step size
- Auto-calculates total points
- Quick setup with **Apply to fields** button

### Method 2: Plot Selection
Visual selection based on reference curves:
- Drag a region on the plot
- Automatically suggests point count
- Perfect for edge-specific ranges

### Method 3: Custom Energy Array
Non-uniform spacing for specialized scans:
- Load from CSV/TXT file
- Manual entry via table editor
- Fine control over pre-edge, edge, and post-edge regions

## Documentation

Full documentation available at: https://xanes-gui.readthedocs.io

- [Installation Guide](https://xanes-gui.readthedocs.io/en/latest/installation.html)
- [Quick Start Tutorial](https://xanes-gui.readthedocs.io/en/latest/quickstart.html)
- [User Guide](https://xanes-gui.readthedocs.io/en/latest/user_guide.html)
- [API Reference](https://xanes-gui.readthedocs.io/en/latest/api.html)
- [Troubleshooting](https://xanes-gui.readthedocs.io/en/latest/troubleshooting.html)

## Requirements

- Python 3.8 or higher
- PyQt5 5.15+
- numpy 1.20+
- pyqtgraph 0.12+
- pyepics 3.5+
- pvaccess 1.0+

## System Requirements

- **OS**: Linux (RHEL 8/9, Ubuntu 20.04+), macOS 10.14+, Windows 10+
- **RAM**: Minimum 4 GB
- **Disk**: 100 MB
- **Network**: Connection to EPICS IOCs

## Screenshots

### Main Interface
![Main Interface](docs/images/main_interface.png)

### Calibration Scan
![Calibration](docs/images/calibration.png)

### Reference Curves
![Curves](docs/images/curves.png)

## Configuration

Settings are stored in `~/.xanes_gui_settings.json`:

```json
{
  "pva_name": "32idbSP1:Pva1:Image",
  "energy_set_pv": "32id:TXMOptics:EnergySet",
  "start_sh_path": "/path/to/xanes_start.sh",
  "calibrated_curves_folder": "/data/Calibrated/",
  "simulated_curves_folder": "/data/Curves/"
}
```

## Usage Example

### Perform a Quick Fe K-edge Calibration

1. Launch the GUI: `xanes-gui`
2. Select **Fe** from the edge list
3. Click **Apply to fields** (sets 6.912-7.312 keV, 1 eV step)
4. Click **Calibrate**
5. Monitor real-time plot and progress

### Start a XANES Scan

1. Configure energy range (any method)
2. Verify start script path in PV Settings
3. Click **Start XANES**
4. Monitor progress in log window

## Development

### Install Development Dependencies

```bash
pip install -e ".[dev,docs]"
```

### Run Tests

```bash
pytest
```

### Build Documentation

```bash
cd docs
make html
```

Documentation will be in `docs/build/html/`.

### Code Style

This project uses:
- Black for code formatting
- flake8 for linting
- mypy for type checking

```bash
black xanes_gui/
flake8 xanes_gui/
mypy xanes_gui/
```

## Contributing

Contributions are welcome! Please:

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

See [CONTRIBUTING.md](CONTRIBUTING.md) for detailed guidelines.

## Citing

If you use XANES GUI in your research, please cite:

```bibtex
@software{xanes_gui_2024,
  title = {XANES GUI: A PyQt5-based Interface for X-ray Absorption Spectroscopy},
  author = {APS Beamline 32-ID},
  year = {2024},
  url = {https://github.com/yourusername/xanes-gui},
  version = {1.0.0}
}
```

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Acknowledgments

- Advanced Photon Source, Argonne National Laboratory
- U.S. Department of Energy, Office of Science
- APS Beamline 32-ID staff and users
- PyQt5 and pyqtgraph development teams
- EPICS collaboration

## Support

- **Documentation**: https://xanes-gui.readthedocs.io
- **Issues**: https://github.com/yourusername/xanes-gui/issues
- **Email**: 32id@aps.anl.gov

## Changelog

See [CHANGELOG.md](CHANGELOG.md) for version history.

## Related Projects

- [EPICS](https://epics-controls.org/) - Experimental Physics and Industrial Control System
- [PyEpics](https://pyepics.github.io/pyepics/) - Python interface to EPICS Channel Access
- [areaDetector](https://areadetector.github.io/) - EPICS areaDetector framework
- [pyqtgraph](http://www.pyqtgraph.org/) - Scientific graphics and GUI library

---

**Developed at APS Beamline 32-ID** | [Advanced Photon Source](https://www.aps.anl.gov/)
